$(function(n,o){var i={getWindowSize:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},getComputedTranslate:function(e){if(!n.getComputedStyle)return{x:0,y:0};var t=getComputedStyle(e),e=t.transform||t.webkitTransform||t.mozTransform,t=e.match(/^matrix3d\((.+)\)$/);return t?{x:parseFloat(t[1].split(", ")[12]),y:parseFloat(t[1].split(", ")[13])}:(t=e.match(/^matrix\((.+)\)$/))?{x:parseFloat(t[1].split(", ")[4]),y:parseFloat(t[1].split(", ")[5])}:{x:0,y:0}},getElementTop:function(e){for(var t=e.offsetTop,n=e.offsetParent;null!=n;)t+=n.offsetTop,t-=o(n).scrollTop(),console.log("⭐️ ~ $(pElem).scrollTop()",o(n).scrollTop()),n.style.transform&&(t+=this.getComputedTranslate(n).y),n=n.offsetParent;return t},getElementLeft:function(e){for(var t=e.offsetLeft,n=e.offsetParent;null!=n;)t+=n.offsetLeft,n.style.transform&&(t+=this.getComputedTranslate(n).x),n=n.offsetParent;return t},padZero:function(e,t,n,a){if(a=a||"0",t="string"!=typeof t?t.toString():t,!~["left","right"].indexOf(e))return t;if(!n)return t;if(t.length>=n)return t;for(var i=n-t.length,r="",o=0;o<i;o++)r+=a;return"left"===e?r+t:t+r}},x={formatTime:function(e,t){if(!this.checkTime(t))return"";var n=t.replace(/[^\d]/g,""),a=n.slice(0,4),t=n.slice(4,6),n=n.slice(-2);return e.replace(/YYYY/i,a).replace(/MM/i,t).replace(/DD/i,n)},checkRunYear:function(e){return e%4==0&&e%100!=0||e%400==0},checkTime:function(e){if("string"!=typeof e)return!1;var t=e.replace(/[^\d]/g,"");if(0!=(8^t.length))return!1;var n=+t.slice(0,4),e=+t.slice(4,6),t=+t.slice(-2);return!(!e||12<e)&&(!!t&&(~[1,3,5,7,8,10,12].indexOf(e)?t<=31:~[4,6,9,11].indexOf(e)?t<=30:this.checkRunYear(n)?t<=29:t<=28))},today:function(){var e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},getWeek:function(e){return new Date(this.formatTime("YYYY-MM-DD",e)).getDay()||7},getMonthDays:function(e){var t=+e.slice(0,4),e=+e.slice(4,6);return~[1,3,5,7,8,10,12].indexOf(e)?31:~[4,6,9,11].indexOf(e)?30:this.checkRunYear(t)?29:28},lastMonthDay:function(e){e=this.getPrevMonth(e);return this.getMonthDays(e.year+i.padZero("left",e.month,2,"0")+"01")},getPrevMonth:function(e){e=new Date(this.formatTime("YYYY-MM-DD",e));return e.setMonth(e.getMonth()-1),{year:e.getFullYear(),month:e.getMonth()+1}},getCurMonth:function(e){e=new Date(this.formatTime("YYYY-MM-DD",e));return{year:e.getFullYear(),month:e.getMonth()+1}},getNextMonth:function(e){e=new Date(this.formatTime("YYYY-MM-DD",e));return e.setMonth(e.getMonth()+1),{year:e.getFullYear(),month:e.getMonth()+1}}};function a(e){this.options={container:null,format:"YYYY-MM-DD",inputFormat:"YYYYMMDD",value:"",width:"",style:"",disabled:!1,change:function(){}},this.options=o.extend({},this.options,e),this.value=x.formatTime("YYYYMMDD",this.options.value||""),this.calendar=null,this.weekText=["日","一","二","三","四","五","六"],this.datePickerWidth=245,this.init()}function r(e){this.options={container:null,format:"YYYY-MM-DD",inputFormat:"YYYYMMDD",value:[],width:"",style:"",disabled:!1,change:function(){}},this.options=o.extend({},this.options,e);e=this.options.value;2===e.filter(function(e){return x.checkTime(e)}).length?this.value=e.map(function(e){return x.formatTime("YYYYMMDD",e)}):this.value=[],this.displayValue=this.setDisplayValue(this.value),this.calendar=null,this.weekText=["日","一","二","三","四","五","六"],this.rangePickerWidth=488,this.init()}a.prototype={init:function(){this.initElement(),this.bindEvent()},renderCalendarIcon:function(){return'<span class="ww-picker-suffix"><span role="img" aria-label="calendar" class="anticon">\n      <svg viewBox="64 64 896 896" focusable="false" data-icon="calendar" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n      <path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"></path></svg>\n      </span></span>'},renderCloseIcon:function(){return'<span class="ww-picker-clear" role="button"><span role="img" aria-label="close-circle" class="anticon">\n      <svg viewBox="64 64 896 896" focusable="false" data-icon="close-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"></path></svg>\n      </span></span>'},initElement:function(){this.options.container.addClass("ww-datepicker-hidden-accessible");var e="";/^\d+$/.test(this.options.width)&&(e="width: "+this.options.width+"px;"),this.options.style&&(e+=this.options.style),this.options.container.after('<div class="ww-picker" style="'.concat(e,'">\n        <div class="ww-picker-input">\n          <input placeholder="请选择日期" size="12" autocomplete="off" value="').concat(x.formatTime(this.options.format,this.value),'">\n          ').concat(this.renderCalendarIcon(),"\n          ").concat(this.value?this.renderCloseIcon():"","\n        </div>\n      </div>")),this.inputElement=this.options.container.next()},renderCalendarHeader:function(e){return'\n        <div class="ww-picker-header" data-year="'.concat(e.year,'" data-month="').concat(e.month,'">\n          <button type="button" tabindex="-1" class="ww-picker-operator ww-picker-header-super-prev-btn" operator="-" unit="year">\n            <span class="ww-picker-super-prev-icon"></span>\n          </button>\n          <button type="button" tabindex="-1" class="ww-picker-operator ww-picker-header-prev-btn" operator="-" unit="month">\n            <span class="ww-picker-prev-icon"></span>\n          </button>\n          <div class="ww-picker-header-view">\n            <button type="button" tabindex="-1" class="ww-picker-year-btn">').concat(e.year,'年</button>\n            <button type="button" tabindex="-1" class="ww-picker-month-btn">').concat(e.month,'月</button>\n          </div>\n          <button type="button" tabindex="-1" class="ww-picker-operator ww-picker-header-next-btn" operator="+" unit="month">\n            <span class="ww-picker-next-icon"></span>\n          </button>\n          <button type="button" tabindex="-1" class="ww-picker-operator ww-picker-header-super-next-btn" operator="+" unit="year">\n            <span class="ww-picker-super-next-icon"></span>\n          </button>\n        </div>\n      ')},pad:function(e){return i.padZero("left",e,2,"0")},renderCalendarBody:function(e,t){for(var n=t.year+""+this.pad(t.month)+"01",a=x.getWeek(n),i=x.getMonthDays(n),r=x.lastMonthDay(n),o=x.getPrevMonth(n),l=x.getNextMonth(n),c=x.today(),s=c.year===t.year&&c.month===t.month,d=e.year===t.year&&e.month===t.month,h=[],p=1;p<=42;p++){var u=~~((p-1)/7);h[u]||(h[u]=[]);var w="",f="",v=!1,m=!1,k=!1,g=!1,y=!1;p<a?(g=r===(f=r-(a-p)+1),w=o.year+this.pad(o.month)+this.pad(f)):a+i<=p?(y=1===(f=p-(a+i)+1),w=l.year+this.pad(l.month)+this.pad(f)):(y=1===(f=p-a+1),g=f===i,w=t.year+""+this.pad(t.month)+this.pad(f),v=!0,m=s&&f===c.day,k=d&&f===e.day),h[u].push({day:w,text:f,curMonth:v,today:m,sel:k,isLast:g,isFirst:y})}return'\n        <div class="ww-picker-body">\n          <table class="ww-picker-content">\n            <thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>\n            <tbody>\n            '.concat(h.map(function(e){e=e.map(function(e){var t="ww-picker-cell";return e.isFirst&&(t+=" ww-picker-cell-start"),e.isLast&&(t+=" ww-picker-cell-end"),e.curMonth&&(t+=" ww-picker-cell-in-view"),e.today&&(t+=" ww-picker-cell-today"),e.sel&&(t+=" ww-picker-cell-selected"),'\n                <td title="'.concat(e.day,'" class="').concat(t,'"><div class="ww-picker-cell-inner">').concat(e.text,"</div></td>\n                ")}).join("");return e+="</tr>"}).join(""),"\n            </tbody>\n          </table>\n        </div>\n      ")},renderCalendarContent:function(e,t){var n={year:"",month:"",day:"",week:""};return e&&(n={year:+e.slice(0,4),month:+e.slice(4,6),day:+e.slice(-2),week:x.getWeek(e)}),t=t||(e?{year:n.year,month:n.month}:{year:(e=x.today()).year,month:e.month}),"\n      ".concat(this.renderCalendarHeader(t),"\n      ").concat(this.renderCalendarBody(n,t),"\n      ")},renderCalendar:function(e){this.calendar?this.showCalendar():(this.calendar=o('<div style="position: absolute; top: 0px; left: 0px; width: 100%;"></div>'),o("body").append(this.calendar),this.calendar.html('<div>\n          <div class="ww-picker-dropdown" style="left: '.concat(e.x,"px; top: ").concat(e.y,'px;">\n            <div class="ww-picker-panel-container">\n            <div class="ww-picker-panel">\n                <div class="ww-picker-date-panel"></div>\n                <div class="ww-picker-footer">\n                  <a class="ww-picker-today-btn">今天</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>')),this.bindCalendarEvent()),this.calendar.find(".ww-picker-date-panel").html(this.renderCalendarContent(this.value))},hasShowCalendar:function(){return!this.calendar.find(".ww-picker-dropdown").hasClass("ww-picker-dropdown-hidden")},showCalendar:function(){this.calendar&&this.calendar.find(".ww-picker-dropdown").removeClass("ww-picker-dropdown-hidden")},hideCalendar:function(){this.calendar&&this.calendar.find(".ww-picker-dropdown").addClass("ww-picker-dropdown-hidden")},setInputVal:function(e){this.inputElement.find("input").val(e)},onchange:function(e){this.value=e,this.setInputVal(x.formatTime(this.options.format,e));var t=x.formatTime(this.options.inputFormat,e),n=this.options.container.get(0);n.value=t,this.options.change.call(n,t),e?this.inputElement.find(".ww-picker-suffix").after(this.renderCloseIcon()):this.inputElement.find(".ww-picker-clear").remove()},bindEvent:function(){this.globalEvent(),this.bindInputEvent()},globalEvent:function(){var a=this;o(document).bind("click",function(e){for(var t=!0,n=e.target;null!=n;)n=n===a.inputElement.get(0)||a.calendar&&n===a.calendar.get(0)?(t=!1,null):n.parentNode;t&&(a.inputElement&&a.inputElement.removeClass("ww-picker-focused"),a.hideCalendar())})},bindInputEvent:function(){var a=this;this.inputElement.find("input").focus(function(){if(a.inputElement.addClass("ww-picker-focused"),a.calendar&&a.hasShowCalendar())return!1;var e,t=i.getElementTop(a.inputElement.get(0)),n=i.getElementLeft(a.inputElement.get(0));i.getWindowSize().width-n<a.datePickerWidth&&((e=a.inputElement.width())<a.datePickerWidth&&(n-=a.datePickerWidth-e)),a.renderCalendar({x:n=n<0?0:n,y:t+a.inputElement.height()})}),this.inputElement.find("input").bind("input",function(e){var t=e.target.value||"";x.checkTime(t)&&(t=x.formatTime("YYYYMMDD",t),e.target.value=x.formatTime(a.options.format,t),a.calendar.find(".ww-picker-date-panel").html(a.renderCalendarContent(t)))}),this.inputElement.find("input").blur(function(e){var t=e.target.value||"";x.checkTime(t)?(t=x.formatTime("YYYYMMDD",t))!==a.value&&a.onchange(t):e.target.value=x.formatTime(a.options.format,a.value)}),this.inputElement.delegate(".ww-picker-clear","click",function(){a.onchange("")})},bindCalendarEvent:function(){var i=this;this.calendar.delegate(".ww-picker-cell","click",function(){i.calendar.find(".ww-picker-cell-selected").removeClass("ww-picker-cell-selected"),o(this).addClass("ww-picker-cell-selected");var e=o(this).attr("title");i.onchange(e),i.hideCalendar()}),this.calendar.delegate(".ww-picker-operator","click",function(e){e.stopPropagation&&e.stopPropagation();var t=o(this).attr("operator"),n=o(this).attr("unit"),a=+o(this).parent().attr("data-year"),e=+o(this).parent().attr("data-month");"-"===t?"year"===n?a--:--e<=0&&(e=12,a--):"year"===n?a++:12<++e&&(e=1,a++),i.calendar.find(".ww-picker-date-panel").html(i.renderCalendarContent(i.value,{year:a,month:e}))}),this.calendar.delegate(".ww-picker-today-btn","click",function(){var e=x.today();i.onchange(e.year+""+i.pad(e.month)+i.pad(e.day)),i.hideCalendar()})}},r.prototype={init:function(){this.initElement(),this.bindEvent()},renderCalendarIcon:function(){return'<span class="ww-picker-suffix"><span role="img" aria-label="calendar" class="anticon">\n      <svg viewBox="64 64 896 896" focusable="false" data-icon="calendar" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n      <path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"></path></svg>\n      </span></span>'},renderCloseIcon:function(){return'<span class="ww-picker-clear" role="button"><span role="img" aria-label="close-circle" class="anticon">\n      <svg viewBox="64 64 896 896" focusable="false" data-icon="close-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"></path></svg>\n      </span></span>'},renderToIcon:function(){return'<span aria-label="to" class="ww-picker-separator"><span role="img" aria-label="swap-right" class="anticon anticon-swap-right">\n      <svg viewBox="0 0 1024 1024" focusable="false" data-icon="swap-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"></path></svg>\n      </span></span>'},initElement:function(){this.options.container.addClass("ww-datepicker-hidden-accessible");var e="";/^\d+$/.test(this.options.width)&&(e="width: "+this.options.width+"px;"),this.options.style&&(e+=this.options.style);var t=2===this.value.filter(function(e){return x.checkTime(e)}).length;this.options.container.after('<div class="ww-picker ww-picker-range" style="'.concat(e,'">\n        <div class="ww-picker-input">\n          <input placeholder="开始日期" size="12" autocomplete="off" value="').concat(t?x.formatTime(this.options.format,this.value[0]):"",'">\n        </div>\n        <div class="ww-picker-range-separator">').concat(this.renderToIcon(),'</div>\n        <div class="ww-picker-input">\n          <input placeholder="结束日期" size="12" autocomplete="off" value="').concat(t?x.formatTime(this.options.format,this.value[1]):"",'">\n        </div>\n        ').concat(this.renderCalendarIcon(),"\n        ").concat(t?this.renderCloseIcon():"","\n      </div>")),this.inputElement=this.options.container.next()},pad:function(e,t){return i.padZero("left",e,t=t||2,"0")},setDisplayValue:function(e){var t;return 2===e.length?e[0].slice(0,4)===e[1].slice(0,4)?(t=x.getNextMonth(e[0]),[{year:+e[0].slice(0,4),month:+e[0].slice(4,6)},t]):e.map(function(e){return+e}).sort().map(function(e){e=e.toString();return{year:+e.slice(0,4),month:+e.slice(4,6)}}):[e=x.today(),t=x.getNextMonth(this.pad(e.year,4)+this.pad(e.month)+"01")]},renderCalendarHeader:function(e,t){var n="left"===e?t[0]:t[1],a="left"===e?t[1]:t[0],i=!1,r=!1,o=!1,t=!1;return"left"===e?(n.month>=a.month&&n.year>=a.year-1&&(o=!0),n.month<a.month&&n.year>=a.year&&(o=!0),n.year===a.year&&n.month>=a.month-1&&(t=!0),n.year===a.year-1&&12===n.month&&1===a.month&&(t=!0)):(n.month>a.month&&n.year<=a.year&&(i=!0),n.month<=a.month&&n.year<=a.year+1&&(i=!0),n.year===a.year&&n.month<=a.month+1&&(r=!0),n.year===a.year+1&&1===n.month&&12===a.month&&(r=!0)),'\n        <div class="ww-picker-header" data-position="'.concat(e,'">\n          <button type="button" tabindex="-1" ').concat(i?"disabled":"",' class="ww-picker-operator ww-picker-header-super-prev-btn" operator="-" unit="year">\n            <span class="ww-picker-super-prev-icon"></span>\n          </button>\n          <button type="button" tabindex="-1" ').concat(r?"disabled":"",' class="ww-picker-operator ww-picker-header-prev-btn" operator="-" unit="month">\n            <span class="ww-picker-prev-icon"></span>\n          </button>\n          <div class="ww-picker-header-view">\n            <button type="button" tabindex="-1" class="ww-picker-year-btn">').concat(n.year,'年</button>\n            <button type="button" tabindex="-1" class="ww-picker-month-btn">').concat(n.month,'月</button>\n          </div>\n          <button type="button" tabindex="-1" ').concat(t?"disabled":"",' class="ww-picker-operator ww-picker-header-next-btn" operator="+" unit="month">\n            <span class="ww-picker-next-icon"></span>\n          </button>\n          <button type="button" tabindex="-1" ').concat(o?"disabled":"",' class="ww-picker-operator ww-picker-header-super-next-btn" operator="+" unit="year">\n            <span class="ww-picker-super-next-icon"></span>\n          </button>\n        </div>\n      ')},renderCalendarBody:function(e,t,n){for(var a="left"===e?n[0]:n[1],n=a.year+""+this.pad(a.month)+"01",i=x.getWeek(n),r=x.getMonthDays(n),o=x.lastMonthDay(n),l=x.getPrevMonth(n),c=x.getNextMonth(n),s=x.today(),d=s.year===a.year&&s.month===a.month,h=[],p=1;p<=42;p++){var u=~~((p-1)/7);h[u]||(h[u]=[]);var w="",f="",v=!1,m=!1,k=!1,g=!1,y=!1,b=!1,C=!1;p<i?(k=o===(f=o-(i-p)+1),w=l.year+this.pad(l.month)+this.pad(f)):i+r<=p?(g=1===(f=p-(i+r)+1),w=c.year+this.pad(c.month)+this.pad(f)):(g=1===(f=p-i+1),k=f===r,w=a.year+""+this.pad(a.month)+this.pad(f),v=!0,m=d&&f===s.day,b=t[0]===w,C=t[1]===w,t[0]&&t[1]&&(y=+w>+t[0]&&+w<+t[1])),h[u].push({day:w,text:f,curMonth:v,today:m,isLast:k,isFirst:g,isInRange:y,isStart:b,isEnd:C})}return'\n        <div class="ww-picker-body">\n          <table class="ww-picker-content">\n            <thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>\n            <tbody>\n            '.concat(h.map(function(e){e=e.map(function(e){var t="ww-picker-cell";return e.isFirst&&(t+=" ww-picker-cell-start"),e.isLast&&(t+=" ww-picker-cell-end"),e.curMonth&&(t+=" ww-picker-cell-in-view"),e.today&&(t+=" ww-picker-cell-today"),e.isInRange&&(t+=" ww-picker-cell-in-range"),e.isStart&&(t+=" ww-picker-cell-range-start"),e.isEnd&&(t+=" ww-picker-cell-range-end"),'\n                <td title="'.concat(e.day,'" class="').concat(t,'"><div class="ww-picker-cell-inner">').concat(e.text,"</div></td>\n                ")}).join("");return e+="</tr>"}).join(""),"\n            </tbody>\n          </table>\n        </div>\n      ")},renderCalendarContent:function(e,t,n){return"\n      ".concat(this.renderCalendarHeader(e,n),"\n      ").concat(this.renderCalendarBody(e,t,n),"\n      ")},renderCalendar:function(e){this.calendar?this.showCalendar():(this.calendar=o('<div style="position: absolute; top: 0px; left: 0px; width: 100%;"></div>'),o("body").append(this.calendar),this.calendar.html('<div>\n          <div class="ww-picker-dropdown ww-picker-dropdown-range" style="left: '.concat(e.x,"px; top: ").concat(e.y,'px;">\n            <div class="ww-picker-panel-container">\n              <div class="ww-picker-panels">\n                <div tabindex="-1" class="ww-picker-panel">\n                  <div class="ww-picker-date-panel ww-picker-left"></div>\n                </div>\n                <div tabindex="-1" class="ww-picker-panel">\n                  <div class="ww-picker-date-panel ww-picker-right"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>')),this.bindCalendarEvent()),this.calendar.find(".ww-picker-date-panel.ww-picker-left").html(this.renderCalendarContent("left",this.value,this.displayValue)),this.calendar.find(".ww-picker-date-panel.ww-picker-right").html(this.renderCalendarContent("right",this.value,this.displayValue))},hasShowCalendar:function(){return!this.calendar.find(".ww-picker-dropdown").hasClass("ww-picker-dropdown-hidden")},showCalendar:function(){this.calendar&&this.calendar.find(".ww-picker-dropdown").removeClass("ww-picker-dropdown-hidden")},hideCalendar:function(){this.calendar&&this.calendar.find(".ww-picker-dropdown").addClass("ww-picker-dropdown-hidden")},setInputVal:function(e){2===e.length?(this.inputElement.find("input").eq(0).val(e[0]),this.inputElement.find("input").eq(1).val(e[1])):(this.inputElement.find("input").eq(0).val(""),this.inputElement.find("input").eq(1).val(""))},onchange:function(e){1===e.length&&(e=[]);var t=this;this.value=e,this.setInputVal(this.value.map(function(e){return x.formatTime(t.options.format,e)}));var n=this.value.map(function(e){return x.formatTime(t.options.inputFormat,e)}),a=this.options.container.get(0);a.value=n.join(","),this.options.change.call(a,n),2===e.length?this.inputElement.find(".ww-picker-suffix").after(this.renderCloseIcon()):this.inputElement.find(".ww-picker-clear").remove()},bindEvent:function(){this.globalEvent(),this.bindInputEvent()},globalEvent:function(){var a=this;o(document).bind("click",function(e){for(var t=!0,n=e.target;null!=n;)n=n===a.inputElement.get(0)||a.calendar&&n===a.calendar.get(0)?(t=!1,null):n.parentNode;t&&(a.inputElement&&a.inputElement.removeClass("ww-picker-focused"),a.hideCalendar())})},bindInputEvent:function(){var a=this;this.inputElement.find("input").focus(function(){if(a.inputElement.addClass("ww-picker-focused"),a.calendar&&a.hasShowCalendar())return!1;var e,t=i.getElementTop(a.inputElement.get(0)),n=i.getElementLeft(a.inputElement.get(0));i.getWindowSize().width-n<a.rangePickerWidth&&((e=a.inputElement.width())<a.rangePickerWidth&&(n-=a.rangePickerWidth-e)),a.renderCalendar({x:n=n<0?0:n,y:t+a.inputElement.height()})}),this.inputElement.find("input").bind("input",function(e){}),this.inputElement.find("input").blur(function(e){}),this.inputElement.delegate(".ww-picker-clear","click",function(){a.onchange([])})},bindCalendarEvent:function(){var r=this;this.calendar.delegate(".ww-picker-cell","click",function(){var e,t=o(this).attr("title");0===r.value.length?(o(this).addClass("ww-picker-cell-range-start").addClass("ww-picker-cell-range-start-single"),r.value=[t]):1===r.value.length?(e=r.value[0],r.onchange(+t<=+e?[t,e]:[e,t]),r.hideCalendar()):(r.calendar.find(".ww-picker-cell").removeClass("ww-picker-cell-range-start").removeClass("ww-picker-cell-range-start-single").removeClass("ww-picker-cell-in-range").removeClass("ww-picker-cell-range-end"),o(this).addClass("ww-picker-cell-range-start").addClass("ww-picker-cell-range-start-single"),r.value=[t])}),this.calendar.delegate(".ww-picker-cell","mouseenter",function(){var e,t,n;1===r.value.length&&(r.calendar.find(".ww-picker-cell").removeClass("ww-picker-cell-range-hover").removeClass("ww-picker-cell-range-hover-start").removeClass("ww-picker-cell-range-hover-end").removeClass("ww-picker-cell-range-hover-edge-end").removeClass("ww-picker-cell-range-hover-edge-start"),e=+(r.value[0]||r.value[1]),t=+o(this).attr("title"),n=[],n=t<=e?[t,e]:[e,t],r.calendar.find(".ww-picker-cell").each(function(){var e=+o(this).attr("title");e===n[0]?o(this).addClass("ww-picker-cell-range-hover-start"):e===n[1]?(o(this).addClass("ww-picker-cell-range-hover-end"),o(this).hasClass("ww-picker-cell-start")&&o(this).addClass("ww-picker-cell-range-hover-edge-start")):e>n[0]&&e<n[1]&&(o(this).addClass("ww-picker-cell-range-hover"),o(this).hasClass("ww-picker-cell-end")&&o(this).addClass("ww-picker-cell-range-hover-edge-end"),o(this).hasClass("ww-picker-cell-start")&&o(this).addClass("ww-picker-cell-range-hover-edge-start"))}))}),this.calendar.delegate(".ww-picker-operator","click",function(e){e.stopPropagation&&e.stopPropagation();var t=o(this).parent().attr("data-position"),n=o(this).attr("operator"),a=o(this).attr("unit"),i="left"===t?r.displayValue[0]:r.displayValue[1],e=i.year,i=i.month;"-"===n?"year"===a?e--:--i<=0&&(i=12,e--):"year"===a?e++:12<++i&&(i=1,e++);e={year:e,month:i},i=[],i="left"===t?[e,r.displayValue[1]]:[r.displayValue[0],e];r.displayValue=i,r.calendar.find(".ww-picker-date-panel.ww-picker-".concat(t)).html(r.renderCalendarContent(t,r.value,i));t="left"===t?"right":"left";r.calendar.find(".ww-picker-date-panel.ww-picker-".concat(t)).html(r.renderCalendarContent(t,r.value,i))})}},o.fn.extend({datePicker:function(n){this.each(function(){var e={},t=o(this);e.value=t.attr("value")||n.value,e.style=t.attr("style")||"",e.format=t.attr("format")||n.format,e.inputFormat=t.attr("inputFormat")||n.inputFormat,e.width=t.attr("width")||n.width,e.disabled="disabled"===t.attr("disabled")||n.disabled,e.change=n.change,e.container=t,new a(e)})},rangePicker:function(a){this.each(function(){var e={},t=o(this),n="string"==typeof(n=t.attr("value")||a.value||[])?n.split(","):n;n="[object Array]"===Object.prototype.toString.call(n)?n:[],e.value=n,e.style=t.attr("style")||"",e.format=t.attr("format")||a.format,e.inputFormat=t.attr("inputFormat")||a.inputFormat,e.width=t.attr("width")||a.width,e.disabled="disabled"===t.attr("disabled")||a.disabled,e.change=a.change,e.container=t,new r(e)})}})}(window,jQuery));